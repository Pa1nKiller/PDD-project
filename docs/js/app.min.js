(()=>{"use strict";const e={};let t=!0,s=(e=500)=>{let s=document.querySelector("body");if(t){let i=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<i.length;e++){i[e].style.paddingRight="0px"}s.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},i=(e=500)=>{let s=document.querySelector("body");if(t){let i=document.querySelectorAll("[data-lp]");for(let e=0;e<i.length;e++){i[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}s.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};const o=class{constructor(e){this.title=e.title,this.subtitle=e.subtitle,this.text=e.text,this.img=e.img,this.structureHTML=new Array,this.createHTML()}createHTML(){for(let e=0;e<this.subtitle.length;e++)this.structureHTML+='<h3 class="element-animation">'+this.subtitle[e]+"</h3>",this.structureHTML+='<p class="element-animation">'+this.text[e]+"</p>",null!=this.img[e]&&(e+1!=this.subtitle.length?this.structureHTML+='<img class="element-animation" src="'+this.img[e]+'">':this.structureHTML+='<img src="'+this.img[e]+'">')}content(){return{title:this.title,html:this.structureHTML}}},n=JSON.parse('{"generalProvisions":{"general":{"title":"Общие положения","subtitle":["1. Дорога и Пешеходы","2. Правило правой руки","3. Светофоры и Знаки","4. Скорость и Дистанция","5. Алкоголь и Наркотики","6. Сотовые телефоны","7. Другие Участники Движения"],"img":["./img/theory/generalProvisions/1/1.jpg","./img/theory/generalProvisions/1/2.jpg","./img/theory/generalProvisions/1/3.jpg","./img/theory/generalProvisions/1/4.jpg","./img/theory/generalProvisions/1/5.jpg","./img/theory/generalProvisions/1/6.jpg","./img/theory/generalProvisions/1/7.jpg"],"text":[["Дорога - это не просто полоса асфальта. Это место, где каждый участник движения должен соблюдать правила и уважать друг друга.","Пешеходы - наши самые уязвимые участники. Помни, что они всегда имеют преимущество на пешеходных переходах."],["В большинстве стран движение на дороге праворульное. Это означает, что при пересечении других транспортных средств, уступай дорогу тем, кто едет справа."],["Подчиняйтесь светофорам и дорожным знакам. Они указывают, когда можно двигаться и когда нужно остановиться."],["Соблюдай разумную скорость и безопасное расстояние между автомобилями. Это позволяет избежать аварий."],["Никогда не управляй транспортным средством, находясь под воздействием алкоголя или наркотиков. Это опасно и незаконно."],["Перед использованием сотового телефона остановись в безопасном месте. Внимание на дороге — твоя первоочередная задача."],["Помни, что на дороге есть много разных участников, включая велосипедистов, мотоциклистов и пешеходов. Уважай их права и будь осторожен."]]},"generalTwo":{"title":"Общие обязанности водителей","subtitle":["1. Сосредоточенность и Безотвлекаемость","2. Скоростной Режим","3. Передача Приоритета","4. Наличие документов","5. Уступать Пешеходам"],"img":["./img/theory/generalProvisions/2/1.jpg",null,"./img/theory/generalProvisions/2/2.jpg","./img/theory/generalProvisions/2/3.jpg","./img/theory/generalProvisions/2/4.jpg"],"text":[["Внимание на дороге - главное правило. Избегайте отвлекающих действий, таких как разговоры по телефону."],["Уважайте ограничения скорости. Не превышайте их, чтобы обеспечить безопасность всех на дороге."],["Правильно уступайте дорогу согласно правилам. Помните о приоритетах."],["Водитель транспортного средства обязан иметь при себе удостоверение и по требованию сотрудников полиции передавать им, для проверки."],["Пешеходы всегда имеют преимущество на пешеходных переходах. Уступайте дорогу им."],["Перед использованием сотового телефона остановись в безопасном месте. Внимание на дороге — твоя первоочередная задача."],["Помни, что на дороге есть много разных участников, включая велосипедистов, мотоциклистов и пешеходов. Уважай их права и будь осторожен."]]},"generalThree":{"title":"Применение специальных сигналов","subtitle":["1. Специальные сигналы","2. Сирена и Мигающие Маячки","3. Уступите Дорогу","4. Будьте Осторожны"],"img":["./img/theory/generalProvisions/3/1.jpg","./img/theory/generalProvisions/3/2.jpg","./img/theory/generalProvisions/3/3.jpg","./img/theory/generalProvisions/3/4.jpg"],"text":[["Специальные сигналы - это средство, которое используется служебными и аварийными транспортными средствами для обозначения их приоритета на дороге."],["Специальные сигналы обычно включают сирену и мигающие маячки. Это предупреждает других участников движения о неотложности их задачи."],["Когда вы видите служебное аварийное транспортное средство с включенными специальными сигналами, вы должны уступить дорогу и пропустить его."],["Водители должны быть особенно осторожными, когда видят транспортное средство с включенными специальными сигналами. Это может быть связано с неотложной медицинской помощью, пожаром или другой аварией. Важно помнить, что специальные сигналы используются для обеспечения безопасности и сохранения жизней. Уступайте дорогу и будьте осторожными, когда видите транспортное средство с включенными специальными сигналами на дороге."]]}},"roadSigns":{"priority":{"title":"Знаки приоритета","subtitle":["1. Знак \\"Уступите дорогу\\"","2. Знак \\"Главная дорога\\"","3. Знак \\"Пешеходный переход\\"","4. Знак \\"Велосипедисты\\"","5. Знак \\"Железнодорожный переезд\\"","6. Знак \\"Однопроходная дорога\\"","7. Знак \\"Конец полосы\\"","8. Знак \\"Пересечение с трамвайными путями\\"","9. Знак \\"Преимущество встречного движения\\"","10. Знак \\"Двустороннее движение\\""],"img":["./img/theory/roadSigns/1/1.jpg","./img/theory/roadSigns/1/2.jpg","./img/theory/roadSigns/1/3.jpg","./img/theory/roadSigns/1/4.jpg","./img/theory/roadSigns/1/5.jpg","./img/theory/roadSigns/1/6.jpg","./img/theory/roadSigns/1/7.jpg","./img/theory/roadSigns/1/8.jpg","./img/theory/roadSigns/1/9.jpg","./img/theory/roadSigns/1/10.jpg"],"text":[["Знак \\"Уступите дорогу\\" указывает, что вы должны уступить дорогу другим участникам движения."],["Знак \\"Главная дорога\\" показывает, что вы находитесь на главной дороге и имеете приоритет перед въезжающими с боковых дорог."],["Знак \\"Пешеходный переход\\" указывает на место, где пешеходы имеют приоритет при пересечении дороги."],["Знак \\"Велосипедисты\\" предупреждает о наличии велосипедной дорожки и обязывает уступить дорогу велосипедистам."],["Знак \\"Железнодорожный переезд\\" указывает на приближение к железнодорожным путям и обязывает уступить дорогу поездам."],["Знак \\"Однопроходная дорога\\" указывает, что дорога однопроходная, и вы должны уступить дорогу встречным транспортным средствам."],["Знак \\"Конец полосы\\" указывает на конец участка средней полосы и переход во владение встречного направления."],["Знак \\"Пересечение с трамвайными путями\\" предупреждает о наличии трамвайных путей и обязывает уступить дорогу трамваям."],["Знак \\"Преимущество встречного движения\\" указывает на приоритет движения водителей по встречной полосе и обязывает уступить дорогу встречному движению."],["Знак \\"Двустороннее движение\\" показывает, что дорога двусторонняя и участники движения могут двигаться в обоих направлениях."]]},"forbidding":{"title":"Запрещающие знаки","subtitle":["1. Сосредоточенность и Безотвлекаемость","2. Скоростной Режим","3. Передача Приоритета","4. Наличие документов","5. Уступать Пешеходам"],"img":["./img/theory/roadSigns/2/1.jpg","./img/theory/roadSigns/2/2.jpg","./img/theory/roadSigns/2/3.jpg","./img/theory/roadSigns/2/4.jpg","./img/theory/roadSigns/2/5.jpg","./img/theory/roadSigns/2/6.jpg","./img/theory/roadSigns/2/7.jpg","./img/theory/roadSigns/2/8.jpg","./img/theory/roadSigns/2/9.jpg","./img/theory/roadSigns/2/10.jpg"],"text":[["Внимание на дороге - главное правило. Избегайте отвлекающих действий, таких как разговоры по телефону."],["Уважайте ограничения скорости. Не превышайте их, чтобы обеспечить безопасность всех на дороге."],["Правильно уступайте дорогу согласно правилам. Помните о приоритетах."],["Водитель транспортного средства обязан иметь при себе удостоверение и по требованию сотрудников полиции передавать им, для проверки."],["Пешеходы всегда имеют преимущество на пешеходных переходах. Уступайте дорогу им."],["Перед использованием сотового телефона остановись в безопасном месте. Внимание на дороге — твоя первоочередная задача."],["Помни, что на дороге есть много разных участников, включая велосипедистов, мотоциклистов и пешеходов. Уважай их права и будь осторожен."]]},"prescriptive":{"title":"Предписывающие знаки","subtitle":["1. Знак \\"Двигаться прямо\\"","2. Знак \\"Поворот направо\\"","3. Знак \\"Поворот налево\\"","4. Знак \\"Двигаться в обратном направлении\\"","5. Знак \\"Объезд препятствия справа\\""],"img":["./img/theory/roadSigns/3/1.jpg","./img/theory/roadSigns/3/2.jpg","./img/theory/roadSigns/3/3.jpg","./img/theory/roadSigns/3/4.jpg","./img/theory/roadSigns/3/5.jpg","./img/theory/roadSigns/3/6.jpg"],"text":[["Знак с изображением стрелки, указывающей вперед, предписывает двигаться прямо, не поворачивая."],["Знак с изображением стрелки, указывающей направо, предписывает совершить правый поворот."],["Знак с изображением стрелки, указывающей налево, предписывает совершить левый поворот."],["Знак с изображением двух стрелок, указывающих в разные стороны, предписывает двигаться в обратном направлении."],["Знак указывает, что объезд различного рода препятствий на проезжей части разрешается со стороны, указанной стрелкой."],["Знак указывает, что движение организовано по кругу в направлении стрелок."]]}}}');e.mousePrlx=new class{constructor(e,t=null){if(this.config=Object.assign({init:!0,logging:!0},e),this.config.init){const e=document.querySelectorAll("[data-prlx-mouse]");e.length?(this.paralaxMouseInit(e),this.setLogging(`Проснулся, слежу за объектами: (${e.length})`)):this.setLogging("Нет ни одного объекта. Сплю...zzZZZzZZz...")}}paralaxMouseInit(e){e.forEach((e=>{const t=e.closest("[data-prlx-mouse-wrapper]"),s=e.dataset.prlxCx?+e.dataset.prlxCx:100,i=e.dataset.prlxCy?+e.dataset.prlxCy:100,o=e.hasAttribute("data-prlx-dxr")?-1:1,n=e.hasAttribute("data-prlx-dyr")?-1:1,r=e.dataset.prlxA?+e.dataset.prlxA:50;let l=0,c=0,a=0,g=0;function d(t=window){t.addEventListener("mousemove",(function(t){const s=e.getBoundingClientRect().top+window.scrollY;if(s>=window.scrollY||s+e.offsetHeight>=window.scrollY){const e=window.innerWidth,s=window.innerHeight,i=t.clientX-e/2,o=t.clientY-s/2;a=i/e*100,g=o/s*100}}))}!function t(){l+=(a-l)*r/1e3,c+=(g-c)*r/1e3,e.style.cssText=`transform: translate3D(${o*l/(s/10)}%,${n*c/(i/10)}%,0);`,requestAnimationFrame(t)}(),t?d(t):d()}))}setLogging(e){this.config.logging&&function(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}(`[PRLX Mouse]: ${e}`)}}({});let r=!1;setTimeout((()=>{if(r){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);const l=class{constructor(e,t,s,i,o){this.path=t,this.carHtml=document.createElement("div"),this.carImg=document.createElement("img"),this.count=document.createElement("span"),this.carImg.src=this.path,this.carHtml.appendChild(this.carImg),this.carHtml.appendChild(this.count),this.count.classList.add("count"),this.carHtml.classList.add("car"),this.carHtml.style.left=s+"px",this.carHtml.style.top=i+"px",this.carImg.style.rotate=o+"deg",document.querySelector(".intersection").appendChild(this.carHtml),this.intersectionCenter=window.getComputedStyle(e),this.left=this.intersectionCenter.getPropertyValue("left"),this.top=this.intersectionCenter.getPropertyValue("top"),this.clickCarHtml()}move(){let e=window.getComputedStyle(this.carHtml),t=e.getPropertyValue("left"),s=e.getPropertyValue("top");if(t<=this.left){console.log(this.left);let e=this.left.substring(0,this.left.length-2);this.top.substring(0,this.top.length-2);t=t.substring(0,t.length-2),s=s.substring(0,s.length-2);let i=()=>{setTimeout((()=>{if(t++,this.carHtml.style.left=t+"px",t<e)i();else{const e=-90,t=1e3;this.smoothRotate(this.carHtml,e,t),setTimeout((()=>{o()}),1e3)}}),2)};i();let o=()=>{setTimeout((()=>{s--,this.carHtml.style.top=s+"px",s>-200&&o()}),2)}}}smoothRotate(e,t,s){let i=null;requestAnimationFrame((function o(n){i||(i=n);const r=n-i,l=function(e,t,s,i){if((e/=i/2)<1)return s/2*e*e*e+t;return s/2*((e-=2)*e*e+2)+t}(r,0,t,s);e.style.transform=`rotate(${l}deg)`,r<s&&requestAnimationFrame(o)}))}clickCarHtml(){this.carHtml.addEventListener("click",(()=>{for(let e=0;e<window.cars.length;e++){if(window.cars[e]==this)return}window.cars.push(this),this.carHtml.querySelector(".count").innerHTML=window.cars.length,3==window.cars.length&&window.start()}))}};function c(e){e.forEach((e=>{e.isIntersecting&&e.target.classList.add("element-show")}))}function a(e){var t=e.split(".");let s=n[t[0]],i=new o(s[t[1]]),r=document.querySelector(".theory__container-content"),l=i.content();r.querySelector("h2").innerHTML=l.title;let a=r.querySelector(".theory__content");a.innerHTML=l.html;let g=new IntersectionObserver(c,{threshold:[.3]}),d=document.querySelectorAll(".element-animation");for(let e of d)g.observe(e);let h,m=speechSynthesis.getVoices();speechSynthesis.onvoiceschanged=()=>{m=speechSynthesis.getVoices(),h=m.find((e=>"Google русский"===e.name)),document.querySelector("#voice").addEventListener("click",S),window.addEventListener("keydown",w)};const u="play",p="pause",y="resume";speechSynthesis.cancel(),document.querySelector("#voice").className=u;let S=({target:e})=>{switch(e=e.parentNode,console.log(e),e.className){case u:speechSynthesis.cancel();const{textContent:t}=a;console.log("asd"),t.split(/[.,]+/).forEach((t=>{const s=t.trim();if(console.log(s),s){const s=function(e,t){const s=new SpeechSynthesisUtterance(t);return s.voice=h,s.lang=h.lang,s.volume=1,s.rate=1.1,s.pitch=.85,s.onstart=()=>{console.log("Started"),e.className=p},s.onend=()=>{console.log("Finished"),e.className=u},s.onerror=e=>console.error(e),s}(e,t);speechSynthesis.speak(s)}}));break;case p:e.className=y,speechSynthesis.pause();break;case y:e.className=p,speechSynthesis.resume()}},w=({code:e})=>{if("Escape"===e)return speechSynthesis.cancel()}}window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),document.addEventListener("DOMContentLoaded",(()=>{g(),a("generalProvisions.general")}));let g=()=>{let e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-icon"),s=e.querySelectorAll(".sidebar__item"),i=e.querySelectorAll(".sidebar__icon");i.forEach((e=>{let t=e.parentNode.querySelector(".sidebar__submenu");e.addEventListener("mouseover",(e=>{!function(e){if(!e)return;i.forEach((e=>{let t=e.parentNode.querySelector(".sidebar__submenu");t.classList.contains("hover")&&t.classList.remove("hover")}))}(e),t.classList.add("hover"),document.addEventListener("click",(()=>{t.classList.remove("hover")}))}))})),s.forEach((e=>{let t=e.querySelector("p"),i=e.querySelector(".sidebar__submenu"),o=e.querySelector("svg");t.addEventListener("click",(e=>{!function(e,t){if(!e)return;s.forEach((t=>{let s=t.querySelector(".sidebar__submenu");s!=e&&s.classList.contains("open")&&(t.querySelector("svg").style.rotate="0deg",s.classList.remove("open"))})),e.classList.contains("open")?(e.classList.remove("open"),t.style.rotate="0deg"):(e.classList.add("open"),t.style.rotate="90deg")}(i,o)})),i.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(()=>{a(e.value)}))}))}));t.addEventListener("click",(()=>{e.classList.toggle("open");document.querySelectorAll("#rect").forEach((e=>{e.classList.toggle("is-visible")})),s.forEach((e=>{let t=e.querySelector(".sidebar__submenu");t.classList.contains("open")&&(e.querySelector("svg").style.rotate="0deg",t.classList.remove("open"))}))}))};window.createTestWindow=()=>{window.cars=[];let e=document.createElement("div");e.classList.add("intersectionCenter");document.querySelector(".intersection").appendChild(e),new l(e,"./img/tests/cars/y-car.png",100,200,90),new l(e,"./img/tests/cars/y-car.png",400,200,90),new l(e,"./img/tests/cars/y-car.png",500,500)},window.start=()=>{for(let e=0;e<window.cars.length;e++)setTimeout((()=>{const t=window.cars[e];console.log(t),t.move()}),1300*e)},document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){t&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?s(e):i(e)})(),document.documentElement.classList.toggle("menu-open"))}))})();